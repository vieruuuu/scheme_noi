from strutils import replace

from tables import `[]`
from tables import toTable
from tables import Table

import component

proc getLocale*(locales: Table[string, string], locale: string): string =
  try:
    result = locales[locale]
  except:
    result = "unknown"

proc render*(data: string): string =
  getFile("keyboardLocale.html")

  const locales = {
    "0000041C": "Albanian",
    "00000401": "Arabic (101)",
    "00010401": "Arabic (102)",
    "00020401": "Arabic (102) Azerty",
    "0000042B": "Armenian eastern",
    "0001042B": "Armenian Western",
    "0000044D": "Assamese - inscript",
    "0000082C": "Azeri Cyrillic",
    "0000042C": "Azeri Latin",
    "0000046D": "Bashkir",
    "00000423": "Belarusian",
    "0000080C": "Belgian French",
    "00000813": "Belgian (period)",
    "0001080C": "Belgian (comma)",
    "00000445": "Bengali",
    "00010445": "Bengali - inscript (legacy)",
    "00020445": "Bengali - inscript",
    "0000201A": "Bosnian (cyrillic)",
    "00030402": "Bulgarian",
    "00000402": "Bulgarian(typewriter)",
    "00010402": "Bulgarian (latin)",
    "00020402": "Bulgarian (phonetic)",
    "00040402": "Bulgarian (phonetic traditional)",
    "00011009": "Canada Multilingual",
    "00001009": "Canada French",
    "00000C0C": "Canada French (legacy)",
    "00000404": "Chinese (traditional) - us keyboard",
    "00000804": "Chinese (simplified) -us keyboard",
    "00000C04": "Chinese (traditional, hong kong s.a.r.) - us keyboard",
    "00001004": "Chinese (simplified, singapore) - us keyboard",
    "00001404": "Chinese (traditional, macao s.a.r.) - us keyboard",
    "00000405": "Czech",
    "00020405": "Czech programmers",
    "00010405": "Czech (qwerty)",
    "0000041A": "Croatian",
    "00000439": "Deanagari - inscript",
    "00000406": "Danish",
    "00000465": "Divehi phonetic",
    "00010465": "Divehi typewriter",
    "00000413": "Dutch",
    "00000425": "Estonian",
    "00000438": "Faeroese",
    "0000040B": "Finnish",
    "0001083B": "Finnish with sami",
    "0000040C": "French",
    "00011809": "Gaelic",
    "00000437": "Georgian",
    "00020437": "Georgian (ergonomic)",
    "00010437": "Georgian (qwerty)",
    "00000407": "German",
    "00010407": "German (ibm)",
    "0000046F": "Greenlandic",
    "00000468": "Hausa",
    "0000040D": "Hebrew",
    "00010439": "Hindi traditional",
    "00000408": "Greek",
    "00010408": "Greek (220)",
    "00030408": "Greek (220) latin",
    "00020408": "Greek (319)",
    "00040408": "Greek (319) latin",
    "00050408": "Greek latin",
    "00060408": "Greek polyonic",
    "00000447": "Gujarati",
    "0000040E": "Hungarian",
    "0001040E": "Hungarian 101 key",
    "0000040F": "Icelandic",
    "00000470": "Igbo",
    "0000085D": "Inuktitut - latin",
    "0001045D": "Inuktitut - naqittaut",
    "00001809": "Irish",
    "00000410": "Italian",
    "00010410": "Italian (142)",
    "00000411": "Japanese",
    "0000044B": "Kannada",
    "0000043F": "Kazakh",
    "00000453": "Khmer",
    "00000412": "Korean",
    "00000440": "Kyrgyz cyrillic",
    "00000454": "Lao",
    "0000080A": "Latin america",
    "00000426": "Latvian",
    "00010426": "Latvian (qwerty)",
    "00010427": "Lithuanian",
    "00000427": "Lithuanian ibm",
    "00020427": "Lithuanian standard",
    "0000046E": "Luxembourgish",
    "0000042F": "Macedonian (fyrom)",
    "0001042F": "Macedonian (fyrom) - standard",
    "0000044C": "Malayalam",
    "0000043A": "Maltese 47-key",
    "0001043A": "Maltese 48-key",
    "0000044E": "Marathi",
    "00000481": "Maroi",
    "00000450": "Mongolian cyrillic",
    "00000850": "Mongolian (mongolian script)",
    "00000461": "Nepali",
    "00000414": "Norwegian",
    "0000043B": "Norwegian with sami",
    "00000448": "Oriya",
    "00000463": "Pashto (afghanistan)",
    "00000429": "Persian",
    "00000415": "Polish (programmers)",
    "00010415": "Polish (214)",
    "00000816": "Portuguese",
    "00000416": "Portuguese (brazillian abnt)",
    "00010416": "Portuguese (brazillian abnt2)",
    "00000446": "Punjabi",
    "00010418": "Romanian (standard)",
    "00000418": "Romanian (legacy)",
    "00020418": "Romanian (programmers)",
    "00000419": "Russian",
    "00010419": "Russian (typewriter)",
    "0002083B": "Sami extended finland-sweden",
    "0001043B": "Sami extended norway",
    "00000C1A": "Serbian (cyrillic)",
    "0000081A": "Serbian (latin)",
    "0000046C": "Sesotho sa Leboa",
    "00000432": "Setswana",
    "0000045B": "Sinhala",
    "0001045B": "Sinhala -Wij 9",
    "0000041B": "Slovak",
    "0001041B": "Slovak (qwerty)",
    "00000424": "Slovenian",
    "0001042E": "Sorbian extended",
    "0002042E": "Sorbian standard",
    "0000042E": "Sorbian standard (legacy)",
    "0000040A": "Spanish",
    "0001040A": "Spanish variation",
    "0000041D": "Swedish",
    "0000083B": "Swedish with sami",
    "00000807": "Swiss german",
    "0000100C": "Swiss french",
    "0000045A": "Syriac",
    "0001045A": "Syriac phonetic",
    "00000428": "Tajik",
    "00000449": "Tamil",
    "00000444": "Tatar",
    "0000044A": "Telugu",
    "0000041E": "Thai Kedmanee",
    "0002041E": "Thai Kedmanee (non-shiftlock)",
    "0001041E": "Thai Pattachote",
    "0003041E": "Thai Pattachote (non-shiftlock)",
    "00000451": "Tibetan (prc)",
    "0001041F": "Turkish F",
    "0000041F": "Turkish Q",
    "00000442": "Turkmen",
    "00000422": "Ukrainian",
    "00020422": "Ukrainian (enhanced)",
    "00000809": "United Kingdom",
    "00000452": "United Kingdom Extended",
    "00000409": "United States",
    "00010409": "United States - dvorak",
    "00030409": "United States - dvorak left hand",
    "00050409": "United States - dvorak right hand",
    "00004009": "United States - india",
    "00020409": "United States - international",
    "00000420": "Urdu",
    "00010480": "Uyghur",
    "00000480": "Uyghur (legacy)",
    "00000843": "Uzbek cyrillic",
    "0000042A": "Vietnamese",
    "00000485": "Yakut",
    "0000046A": "Yoruba",
    "00000488": "Wolof"
  }.toTable

  result = file.replace("$dataProcessed", getLocale(locales, data))
  result = result.replace("$data", data)
  result = result.replace("$id", id("klocale"))
